CREATE TABLE task_result (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    task_id BIGINT NOT NULL,
    result_status INTEGER NOT NULL,
    objective_function_value DOUBLE PRECISION,
    relative_gap DOUBLE PRECISION,
    elapsed_time DOUBLE PRECISION,
    optimizer_message VARCHAR(255),
    created_date_time TIMESTAMP WITHOUT TIME ZONE,
    update_date_time TIMESTAMP WITHOUT TIME ZONE,
    CONSTRAINT pk_task_result PRIMARY KEY (id)
);
ALTER TABLE task_result ADD CONSTRAINT uc_task_result_task UNIQUE (task_id);
ALTER TABLE task_result ADD CONSTRAINT FK_TASK_RESULT_ON_TASK FOREIGN KEY (task_id) REFERENCES task (id);
CREATE UNIQUE INDEX idx_task_result_task_id_unq ON task_result(task_id);

CREATE TABLE validation_message (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    task_result_id BIGINT NOT NULL,
    level INTEGER NOT NULL,
    object_type INTEGER NOT NULL,
    object_name VARCHAR(255) NOT NULL,
    object_id BIGINT NOT NULL,
    object_revision BIGINT NOT NULL,
    message VARCHAR(255),
    CONSTRAINT pk_validation_message PRIMARY KEY (id)
);
ALTER TABLE validation_message ADD CONSTRAINT FK_VALIDATION_MESSAGE_ON_TASK_RESULT FOREIGN KEY (task_result_id) REFERENCES task_result (id);
CREATE INDEX idx_validation_message_result_id ON validation_message(task_result_id);